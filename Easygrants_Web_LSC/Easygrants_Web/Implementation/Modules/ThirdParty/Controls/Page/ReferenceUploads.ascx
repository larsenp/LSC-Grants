<%@ Control Language="vb" AutoEventWireup="true" Inherits="Implementation.Modules.ThirdParty.Controls.Page.cReferenceUploads" TargetSchema="http://schemas.microsoft.com/intellisense/ie5" CodeBehind="ReferenceUploads.ascx.vb" %>
<%@ Register Tagprefix='Core' Namespace='Core.Web.SvrCtls' Assembly='Core' %>
<%@ Register Tagprefix='Core' tagname='NewWindowOpener' src='../../../../../Core/Controls/Base/NewWindowOpener.ascx' %>
<Core:NewWindowOpener id='ctlNewWindowOpener' runat='server'/>
<br>
<table border='0' cellspacing='0' cellpadding='2' width='100%' runat='server' id='tblBeforeSubmission'>
    <tr><td>
       <table border='0' cellspacing='0' cellpadding='2' width='100%' runat='server'>
	        <tr><td class="SeparatorHdg"><b>Instructions</b></td></tr>
	        <tr><td>&nbsp;</td></tr>
	        <tr><td><span id='spnPageContent' runat='server' /></td></tr>
        </table>
        <table border='0' cellspacing='0' cellpadding='2' width='100%' runat='server'>
	        <tr><td class="SeparatorHdg"  colspan='4'><b>Application Information</b></td></tr>
	        <tr><td  colspan='4'>&nbsp;</td></tr>
	        <tr>
		        <td width='15%'><B>Applicant</B></td>
		        <td ><span id='spnApplicantName' runat='server'/></td>
		        <td width='15%'><b>Funding Opportunity</b></td>
		        <td><span id='spnCompetition' runat='server'/></td>
	        </tr>
        </table>
        <table border='0' cellspacing='0' cellpadding='0' width='100%' runat='server' ID="tblUploads">	
 	        <tr><td>
             <Core:cUserCtlLoader ID="CUserCtlLoader1" CtlID='ctlTaskUploads' Src='Easygrants/Controls/PageSection/TaskUploads.ascx'
				        runat='server' />
            </td></tr>
        </table>
        <table border='0' cellspacing='0' cellpadding='0' width='100%' runat='server' ID="tblSubmission">	
	        <tr><td class="SeparatorHdg" ><b>Submission</b></td></tr>
	        <tr><td>&nbsp;</td></tr>
	        <tr align='center' visible='true'>
		        <td><span runat='server' id='spnSubmit'/></td>
	        </tr>
        </table>
    </td></tr>
</table>
<table border='0' cellspacing='0' cellpadding='0' width='100%' runat='server' ID='tblPostSubmission'>	
    <tr><td>
        <table border='0' cellspacing='0' cellpadding='0' width='100%' runat='server' ID="tblInst">	
	        <tr><td>&nbsp;</td></tr>
	        <tr><td>Thank you for submitting your letter of reference. Because your letter has been completed and 
	            submitted, the data entry pages are no longer available to you. If you have any questions, 
	            please contact us using the support information at the bottom of the page.<br><br>  
                To view your submission, click <b>View PDF</b>.</td></tr>
	        <tr><td>&nbsp;</td></tr>
        </table>
<%--        <table border='0' cellspacing='0' cellpadding='2' width='100%' runat='server'>
	        <tr><td class="SeparatorHdg"  colspan='4'><b>Application Information</b></td></tr>
	        <tr><td  colspan='4'>&nbsp;</td></tr>
	        <tr>
		        <td width='15%'><B>Applicant</B></td>
		        <td ><span id='spnPostApplicantName' runat='server'/></td>
		        <td width='15%'><b>Funding Opportunity</b></td>
		        <td><span id='spnPostCompetition' runat='server'/></td>
	        </tr>
 	        <tr><td  colspan='4'>&nbsp;</td></tr>
       </table>--%>
        <table border='0' cellspacing='0' cellpadding='0' width='100%' runat='server' ID="tblPDFInst">	
            <tr><td class="SeparatorHdg"  colspan='4'><b>PDF</b></td></tr>
	        <tr><td>&nbsp;</td></tr>
	        <tr><td>&nbsp;</td></tr>
	        <tr align='center'><td align='left'><span id='spnPostSubViewApp' runat='server'/></td></tr>
	        <tr><td>&nbsp;</td></tr>
	        <tr><td>
	            Note: To view this or any PDF file generated by this system, use one of the supported versions of <a href='http://www.adobe.com/products/acrobat/readstep2.html' target='_blank'>Adobe Reader</a>. 
		        In addition, you must also set any pop-up blocker programs to allow pop-up windows. <span runat='server' id='spnSystemRequirements' /> for information on browser
		         compatibility and a list of supported versions of Adobe Reader. 
	        </td></tr>
        </table>
    </td></tr>
</table>
<span id='spnConfigXML' visible='false' runat='server'>
	<ModuleSection>
		<PageContent />
		<DataObject Key='GranteeProject' DataObjectDefinitionKey='GranteeProject'>
			<Filters>
				<Argument Type='ModuleUser' TypeKey='GranteeProjectID' PropertyKey='GranteeProjectID' Value='' Bool=''/>
			</Filters>
			<DisplayProperties>
				<DisplayProperty PropertyKey='PrimaryPerson.LastNameFirstNameMiddleName'>
					<Control ID='spnApplicantName' Type='HtmlGenericControl'> </Control>
				</DisplayProperty>
				<DisplayProperty PropertyKey='WfProject.WfCompetition.CompetitionDisplayName'>
					<Control ID='spnCompetition' Type='HtmlGenericControl'> </Control>
				</DisplayProperty>													
<%--				<DisplayProperty PropertyKey='PrimaryPerson.LastNameFirstNameMiddleName'>
					<Control ID='spnPostApplicantName' Type='HtmlGenericControl'> </Control>
				</DisplayProperty>
				<DisplayProperty PropertyKey='WfProject.WfCompetition.CompetitionDisplayName'>
					<Control ID='spnPostCompetition' Type='HtmlGenericControl'> </Control>
				</DisplayProperty>	--%>												
			</DisplayProperties>
		</DataObject><!-- Key='GranteeProject' -->
		<DataObject Key='WfTaskAssignment' DataObjectDefinitionKey='WfTaskAssignment' Updatable='False'>
			<Filters>
				<Argument Type='ModuleUser' TypeKey='WfTaskAssignmentID' PropertyKey='WfTaskAssignmentID' Value=''/>
			</Filters>
			<DisplayProperties>
				<DisplayProperty PropertyKey=''>
					<Control ID='btnSubmit' Container='spnSubmit' Type='cButton' Image='Submit'>
						<Action
							PostBack='True'
							Object='DataPresenter'
							Method='SubmissionContent_Submit'/>
						<Visible>
							<Argument PropertyKey='WfTaskStatusID' Value='1' NullDataObject='' Bool='Or' />
							<Argument PropertyKey='WfTaskStatusID' Value='4' NullDataObject='' Bool='Or' />
						</Visible>						
					</Control>	
				</DisplayProperty>
				<DisplayProperty PropertyKey=''>
					<Control ID='btnPostSubViewApp'
						Type='cButton'
						Container='spnPostSubViewApp'
						Caption='View PDF'>
						<Action
							PostBack='True'
							Object='DataPresenter'
							Method='ViewAppPDF'>
							<Parameters>
								<Argument Type='DataObjectCollection' TypeKey='WfTaskAssignment' DataObjectPropertyKey='WfTaskAssignmentID' AttributeName='' BaseValue=''/>															
								<Argument Type='DataObjectCollection' TypeKey='WfTaskAssignment' DataObjectPropertyKey='WfProjectTask.AppPDFReportKeyLink.FinalPDFReportKeyLink.ReportOutputDefinitionID' AttributeName='' BaseValue=''/>															
							</Parameters>
						</Action>
					</Control>										
				</DisplayProperty>	
			</DisplayProperties>	
		</DataObject>
		<DataObject Key='SubmittedFile' DataObjectDefinitionKey='SubmittedFile' Updatable='False' >
			<Filters>
				<Argument Type='ModuleUser' TypeKey='WfTaskAssignmentID' PropertyKey='EntityID' Value='' />
				<Argument Type='Data' TypeKey='EntityDataObjectKey' PropertyKey='EntityDataObjectKey' Value='WfTaskAssignment' />
				<Argument Type='Data' TypeKey='ConversionStatus' PropertyKey='ConversionStatus' Value='-1' />
				<Argument Type='Data' TypeKey='' PropertyKey='IsRequired' Value='True' >
					<RelatedProperty PropertyKey='TaskUploadType' />
				</Argument>				
			</Filters>
		</DataObject>	
		<DataObject Key='PersonRelationship' DataObjectDefinitionKey='PersonRelationship' Updatable='False'>
			<Filters>
				<Argument Type='DataObjectCollection' TypeKey='WfTaskAssignment' DataObjectPropertyKey='WfTaskAssignmentPersonRelationship.PersonRelationshipID' PropertyKey='PersonRelationshipID'/>				
			</Filters>
		</DataObject>	
		<DataObject Key='ApplicationWfTaskAssignment' DataObjectDefinitionKey='WfTaskAssignment' Updatable='False'>
			<Filters>				
				<Argument Type='DataObjectCollection' TypeKey='PersonRelationship' DataObjectPropertyKey='TaskID' PropertyKey='WfTaskID'/>				
				<Argument Type='DataObjectCollection' TypeKey='PersonRelationship' DataObjectPropertyKey='GranteeProjectID' PropertyKey='GranteeProjectID'/>				
			</Filters>
		</DataObject>	
	</ModuleSection>
</span>